package kr.ac.kopo;



import java.io.File;
import java.io.IOException;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.multipart.MultipartFile;

@Controller
public class RootController {
	final String path = "d://upload/";
	
	@RequestMapping("/")
	public String index() {
		return "index";
	}
	
	@PostMapping("/upload")
	public String upload(Image item) {
		MultipartFile file=item.getUploadFile(); //내가 올린 파일 어딘가에 저장된상태
		
		if(file !=null && file.getSize()>0) {
			String filename =file.getOriginalFilename();
			try {
				file.transferTo(new File(path+filename));
			} catch (IllegalStateException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} catch (IOException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} //내가 업로드한 파일 이름으로 파일 만들기(내용은 없는 상태)
		}
		
		
		return "redirect:.";
	}
}
